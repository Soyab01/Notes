<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Raj Exam Hub | Premium 3D Hub</title>
    
    <!-- External CSS -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #a855f7;
            --glass: rgba(255, 255, 255, 0.08);
            --dark-bg: #0f172a;
        }

        body {
            background: radial-gradient(circle at top right, #1e1b4b, #0f172a);
            color: #f8fafc;
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 120px;
            user-select: none;
        }

        /* --- UI Elements --- */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 25px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transition: 0.3s;
        }

        .note-card { display: flex; align-items: center; justify-content: space-between; transition: 0.4s; }
        .note-card:hover { transform: translateY(-5px); border-color: var(--primary); }

        .icon-3d {
            width: 50px; height: 50px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 12px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.3rem; box-shadow: 0 8px 15px rgba(99, 102, 241, 0.3);
            flex-shrink: 0;
        }

        /* --- Detailed Legal Content --- */
        .policy-item {
            background: rgba(0,0,0,0.2);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 15px;
            border: 1px solid rgba(255,255,255,0.05);
        }
        .policy-item h4 { color: var(--primary); font-weight: 700; margin-bottom: 15px; }
        .policy-item p { font-size: 0.85rem; line-height: 1.7; color: #cbd5e1; text-align: justify; }

        /* --- Login Screen --- */
        #auth-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--dark-bg); z-index: 5000; display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .btn-google {
            background: white; color: #333; border: none; padding: 12px 25px;
            border-radius: 50px; font-weight: 700; display: flex; align-items: center;
            gap: 12px; box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }

        /* --- Navigation --- */
        .nav-dock {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 95%; max-width: 550px; background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(25px); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 35px; display: flex; justify-content: space-around;
            padding: 12px 0; z-index: 4000; box-shadow: 0 20px 50px rgba(0,0,0,0.6);
        }
        .nav-link-3d { color: rgba(255,255,255,0.4); text-decoration: none; text-align: center; flex: 1; cursor: pointer; }
        .nav-link-3d.active { color: var(--primary); transform: translateY(-5px); text-shadow: 0 0 10px var(--primary); }
        .nav-link-3d i { font-size: 1.2rem; display: block; }
        .nav-link-3d span { font-size: 0.6rem; font-weight: 700; text-transform: uppercase; }

        /* --- Global Utils --- */
        #main-app { display: none; }
        .page { display: none; }
        .page.active { display: block; animation: fadeInUp 0.4s ease-out; }
        @keyframes fadeInUp { from {opacity: 0; transform: translateY(20px);} to {opacity: 1; transform: translateY(0);} }
        
        .footer-links { margin-top: 30px; text-align: center; opacity: 0.5; font-size: 0.75rem; padding: 20px 0; border-top: 1px solid var(--glass); }
        .footer-links a { color: white; margin: 0 8px; text-decoration: none; cursor: pointer; }

        .btn-buy { background: var(--primary); border: none; color: white; padding: 8px 20px; border-radius: 12px; font-weight: 700; box-shadow: 0 4px 0 #312e81; }
        #reader-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; }
        iframe { width: 100%; height: 93vh; border: none; }
    </style>
</head>
<body oncontextmenu="return false;">

    <!-- 1. LOGIN SCREEN -->
    <div id="auth-screen">
        <div class="glass-card text-center" style="max-width: 400px; width: 90%;">
            <div class="mb-3" style="font-size: 3rem; color: var(--primary);"><i class="fas fa-graduation-cap"></i></div>
            <h2 class="fw-800">RAJ HUB</h2>
            <p class="small opacity-75 mb-4">Premium Rajasthan Exam Notes Library</p>
            <button class="btn-google mx-auto mb-4" onclick="login()">
                <img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_Reference_Icon.svg" width="22">
                Sign in with Google
            </button>
            <div class="footer-links" style="opacity: 0.8;">
                <a onclick="showPage('legalPage')">Terms</a> | <a onclick="showPage('legalPage')">Privacy</a> | <a onclick="showPage('legalPage')">Refund Policy</a>
            </div>
        </div>
    </div>

    <!-- 2. MAIN APP -->
    <div id="main-app">
        <header class="container pt-4 d-flex justify-content-between align-items-center">
            <h3 class="fw-bold mb-0">RAJ<span class="text-primary">HUB</span></h3>
            <select class="form-select w-auto bg-dark text-white border-secondary btn-sm rounded-pill" id="langSelect" onchange="switchLang()">
                <option value="hi">हिन्दी</option>
                <option value="en">English</option>
            </select>
        </header>

        <div class="container mt-2">
            
            <!-- HOME PAGE -->
            <div id="homePage" class="page active">
                <div class="py-4 text-center">
                    <h2 class="fw-800" id="u-welcome">नमस्ते</h2>
                    <p class="text-info small">Best Notes for Rajasthan Exams</p>
                </div>
                <div id="notesGrid"></div>
                <div class="footer-links">
                    <a onclick="showPage('legalPage')">Terms & Conditions</a> | <a onclick="showPage('legalPage')">Privacy Policy</a> | <a onclick="showPage('legalPage')">Shipping</a>
                </div>
            </div>

            <!-- LIBRARY PAGE -->
            <div id="purchasePage" class="page">
                <div class="py-4 text-center"><h2>मेरी लाइब्रेरी</h2><p class="text-success small">Purchased Notes</p></div>
                <div id="myNotesGrid"></div>
            </div>

            <!-- PROFILE PAGE -->
            <div id="profilePage" class="page">
                <div class="glass-card text-center mt-4">
                    <img id="u-img" src="" class="rounded-circle mb-3" style="width: 80px; border: 3px solid var(--primary);">
                    <h4 id="u-name">Student Name</h4>
                    <p id="u-email" class="text-info small mb-4"></p>
                    
                    <div class="text-start bg-dark bg-opacity-50 p-3 rounded-4 mb-4">
                        <p class="small mb-2" onclick="showPage('legalPage')"><i class="fas fa-file-contract me-2"></i> Terms & Conditions</p>
                        <p class="small mb-2" onclick="showPage('legalPage')"><i class="fas fa-user-shield me-2"></i> Privacy Policy</p>
                        <p class="small mb-2" onclick="showPage('legalPage')"><i class="fas fa-truck me-2"></i> Shipping Policy</p>
                        <p class="small mb-0" onclick="showPage('legalPage')"><i class="fas fa-undo me-2"></i> Refunds & Cancellation</p>
                    </div>

                    <button class="btn btn-danger btn-sm rounded-pill w-100" onclick="logout()">Logout</button>
                </div>
            </div>

            <!-- LEGAL POLICIES PAGE (RESTRUCTURED) -->
            <div id="legalPage" class="page">
                <div class="py-4 text-center"><h2>Legal & Support</h2></div>
                
                <div class="policy-item">
                    <h4>1. Contact Us (संपर्क करें)</h4>
                    <p><strong>Business Name:</strong> Mnoj Nehra Notes Hub<br>
                    <strong>Proprietor:</strong> Manoj Nehra<br>
                    <strong>Address:</strong> Ward No. 12, Rajasthan, India<br>
                    <strong>Email:</strong> support@mnojnehra.com<br>
                    <strong>Phone:</strong> +91 8769089527<br>
                    <strong>Support Hours:</strong> Monday - Saturday (10 AM to 6 PM)</p>
                </div>

                <div class="policy-item">
                    <h4>2. Terms and Conditions</h4>
                    <p>Welcome to Raj Exam Hub. By using our website, you agree to these terms: 1. All notes are for personal use only. Sharing or reselling content is strictly prohibited. 2. Account sharing will result in an immediate ban. 3. Mnoj Nehra holds all intellectual property rights to the content provided on this platform. 4. We reserve the right to modify services without prior notice.</p>
                </div>

                <div class="policy-item">
                    <h4>3. Privacy Policy</h4>
                    <p>We take your privacy seriously. 1. Data Collection: We collect your name, email, and profile photo via Google login. 2. Data Usage: Your data is used only to manage note access. 3. Third Parties: We do not sell your data to any external agencies. 4. Payment Security: All transactions are processed via Razorpay encrypted servers. Your card/UPI details are never stored by us.</p>
                </div>

                <div class="policy-item">
                    <h4>4. Shipping Policy</h4>
                    <p>Raj Exam Hub deals exclusively in digital goods (PDF files). 1. Digital Delivery: Notes are unlocked instantly in the 'Library' section upon successful payment. 2. No Physical Delivery: We do not ship physical books or hard copies. 3. No Shipping Charges: Since delivery is electronic, there are no shipping fees.</p>
                </div>

                <div class="policy-item">
                    <h4>5. Cancellation and Refunds</h4>
                    <p>1. No Refund: Once a digital note is unlocked, we follow a strict no-refund policy. 2. Duplicate Payments: If you are charged twice, contact support with transaction IDs; refunds will be processed in 7 days. 3. Cancellation: Orders cannot be cancelled after the digital content is unlocked.</p>
                </div>

                <button class="btn btn-primary w-100 rounded-pill mb-5" onclick="showPage('homePage')">Back to Home</button>
            </div>
        </div>

        <!-- Navigation Dock -->
        <div class="nav-dock">
            <div class="nav-link-3d active" onclick="showPage('homePage', this)"><i class="fas fa-home"></i><span>Home</span></div>
            <div class="nav-link-3d" onclick="showPage('purchasePage', this)"><i class="fas fa-book-open"></i><span>Library</span></div>
            <div class="nav-link-3d" onclick="showPage('profilePage', this)"><i class="fas fa-user-circle"></i><span>Profile</span></div>
            <div class="nav-link-3d" onclick="showPage('legalPage', this)"><i class="fas fa-shield-alt"></i><span>Legal</span></div>
        </div>
    </div>

    <!-- Reader View -->
    <div id="reader-overlay">
        <div class="p-3 bg-dark d-flex justify-content-between align-items-center">
            <span class="fw-bold text-primary small">SECURE READER</span>
            <button class="btn btn-danger btn-sm rounded-pill px-4" onclick="closeReader()">CLOSE X</button>
        </div>
        <iframe id="pdfViewer"></iframe>
    </div>

    <!-- Firebase Scripts -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAhg7hKJ123JRAfio7fymK543XpuNonMHo",
            authDomain: "showpdf-ffa34.firebaseapp.com",
            projectId: "showpdf-ffa34",
            storageBucket: "showpdf-ffa34.firebasestorage.app",
            messagingSenderId: "943291456891",
            appId: "1:943291456891:web:b96e20acd76bd3463b71de"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        window.login = () => { signInWithPopup(auth, provider).catch(e => alert(e.message)); };
        window.logout = () => { signOut(auth).then(() => location.reload()); };

        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById('auth-screen').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                document.getElementById('u-welcome').innerText = "नमस्ते, " + user.displayName.split(' ')[0];
                document.getElementById('u-name').innerText = user.displayName;
                document.getElementById('u-email').innerText = user.email;
                document.getElementById('u-img').src = user.photoURL;
                renderNotes();
            } else {
                document.getElementById('auth-screen').style.display = 'flex';
                document.getElementById('main-app').style.display = 'none';
            }
        });
    </script>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
        const notesData = [
            { id: 1, hi: "राजस्थान पुलिस - लक्ष्य नोट्स", en: "Raj Police Master Notes", cat: "Police", price: 99, file: "raj. police.pdf" },
            { id: 2, hi: "कोटा सिटी गाइड (Premium PDF)", en: "Kota City Master Guide", cat: "All", price: 49, file: "kota city.pdf" },
            { id: 3, hi: "पटवारी मुख्य परीक्षा नोट्स", en: "Patwari Exam Special", cat: "Patwari", price: 149, file: "patwari.pdf" },
            { id: 4, hi: "LDC / Clerk Grade-II Notes", en: "LDC Clerk Notes", cat: "LDC", price: 120, file: "ldc.pdf" },
            { id: 5, hi: "RAS राजस्थान कला एवं संस्कृति", en: "RAS Art & Culture", cat: "RAS", price: 299, file: "ras_culture.pdf" }
        ];

        function renderNotes() {
            let grid = document.getElementById('notesGrid'); grid.innerHTML = '';
            notesData.forEach(n => {
                let paid = localStorage.getItem(n.file);
                grid.innerHTML += `<div class="glass-card note-card mt-2">
                    <div class="d-flex align-items-center"><div class="icon-3d"><i class="fas fa-file-pdf"></i></div>
                    <div class="ms-3"><h6 class="mb-0 fw-bold">${n.hi}</h6><small class="text-info">${n.cat}</small></div></div>
                    <div class="d-flex align-items-center">${!paid ? `<span class="fw-bold text-success me-2">₹${n.price}</span>` : ''}
                    <button class="btn-buy" onclick="${paid?`openReader('${n.file}')`:`payNow(${n.price},'${n.file}')`}">${paid?'पढ़ें':'खरीदें'}</button></div>
                </div>`;
            });
        }

        function renderMyPurchases() {
            let grid = document.getElementById('myNotesGrid'); grid.innerHTML = '';
            let count = 0;
            notesData.forEach(n => {
                if(localStorage.getItem(n.file)) {
                    count++;
                    grid.innerHTML += `<div class="glass-card note-card mt-2">
                        <h6 class="mb-0 fw-bold">${n.hi}</h6>
                        <button class="btn-buy" onclick="openReader('${n.file}')">पढ़ें</button>
                    </div>`;
                }
            });
            if(count === 0) grid.innerHTML = '<p class="text-center mt-5 opacity-50">No purchases found.</p>';
        }

        function showPage(pId, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pId).classList.add('active');
            if(el) { document.querySelectorAll('.nav-link-3d').forEach(i => i.classList.remove('active')); el.classList.add('active'); }
            if(pId === 'purchasePage') renderMyPurchases();
        }

        function payNow(amt, file) {
            var options = {
                "key": "rzp_test_RwizK12wU5cyN6", 
                "amount": amt * 100, "currency": "INR", "name": "Raj Exam Hub",
                "handler": function (response) { localStorage.setItem(file, "paid"); location.reload(); }
            };
            new Razorpay(options).open();
        }

        function openReader(file) {
            document.getElementById('reader-overlay').style.display = 'block';
            let pdfUrl = window.location.href.split('index.html')[0] + encodeURIComponent(file);
            document.getElementById('pdfViewer').src = "https://docs.google.com/viewer?url=" + encodeURIComponent(pdfUrl) + "&embedded=true";
        }

        function closeReader() { document.getElementById('reader-overlay').style.display = 'none'; document.getElementById('pdfViewer').src = ""; }
    </script>
</body>
</html>
