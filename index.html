<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Raj Exam Hub | Premium 3D Edition</title>
    
    <!-- External Libraries -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #a855f7;
            --glass: rgba(255, 255, 255, 0.08);
            --dark-bg: #0f172a;
        }

        body {
            background: radial-gradient(circle at top right, #1e1b4b, #0f172a);
            color: #f8fafc;
            font-family: 'Poppins', sans-serif;
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 120px;
            user-select: none;
        }

        /* --- 3D Animations & UI --- */
        .glass-card {
            background: var(--glass);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 25px;
            padding: 20px;
            margin-bottom: 20px;
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            transform-style: preserve-3d;
        }

        .note-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
        }

        /* --- Google Login Screen --- */
        #auth-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: var(--dark-bg); z-index: 5000; display: flex; align-items: center; justify-content: center;
        }
        .btn-google {
            background: white; color: #333; border: none; padding: 12px 25px;
            border-radius: 50px; font-weight: 700; display: flex; align-items: center;
            gap: 12px; transition: 0.3s; box-shadow: 0 10px 20px rgba(0,0,0,0.4);
        }
        .btn-google:hover { transform: scale(1.05); }

        /* --- Category Pills --- */
        .cat-scroll {
            display: flex; overflow-x: auto; gap: 10px;
            padding: 10px 0 20px; scrollbar-width: none;
        }
        .cat-scroll::-webkit-scrollbar { display: none; }
        .cat-pill {
            background: var(--glass); border: 1px solid rgba(255,255,255,0.1);
            padding: 8px 20px; border-radius: 50px; white-space: nowrap;
            font-size: 0.8rem; font-weight: 600; cursor: pointer; transition: 0.3s;
        }
        .cat-pill.active { background: var(--primary); box-shadow: 0 5px 15px rgba(99, 102, 241, 0.5); }

        /* --- Bottom 4-Item Navigation --- */
        .nav-dock {
            position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 95%; max-width: 550px; background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(25px); border: 1px solid rgba(255,255,255,0.1);
            border-radius: 35px; display: flex; justify-content: space-around;
            padding: 12px 0; z-index: 4000; box-shadow: 0 20px 50px rgba(0,0,0,0.6);
        }
        .nav-link-3d { color: rgba(255,255,255,0.4); text-decoration: none; text-align: center; flex: 1; cursor: pointer; }
        .nav-link-3d.active { color: var(--primary); transform: translateY(-5px); text-shadow: 0 0 10px var(--primary); }
        .nav-link-3d i { font-size: 1.2rem; display: block; margin-bottom: 2px; }
        .nav-link-3d span { font-size: 0.6rem; font-weight: 700; text-transform: uppercase; }

        /* --- Professional Legal Sections --- */
        .policy-content {
            background: rgba(0,0,0,0.25); border-radius: 20px;
            padding: 25px; margin-top: 15px; border: 1px solid rgba(255,255,255,0.05);
            font-size: 0.85rem; line-height: 1.8; color: #cbd5e1;
        }
        .policy-content h4 { color: var(--primary); margin-top: 25px; font-weight: 800; border-left: 4px solid var(--secondary); padding-left: 10px; }

        /* --- Global App UI --- */
        #main-app { display: none; }
        .page { display: none; animation: fadeInUp 0.5s ease-out; }
        .page.active { display: block; }
        @keyframes fadeInUp { from {opacity: 0; transform: translateY(20px);} to {opacity: 1; transform: translateY(0);} }

        .btn-3d {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border: none; color: white; padding: 10px 20px; border-radius: 12px;
            font-weight: 700; box-shadow: 0 4px 0 #312e81; transition: 0.2s;
        }
        .btn-3d:active { transform: translateY(3px); box-shadow: none; }

        #reader-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; }
        iframe { width: 100%; height: 93vh; border: none; }
    </style>
</head>
<body oncontextmenu="return false;">

    <!-- 1. GOOGLE AUTH SCREEN -->
    <div id="auth-screen">
        <div class="glass-card text-center" style="max-width: 400px; width: 90%;">
            <div class="mb-4" style="font-size: 3rem; color: var(--primary);"><i class="fas fa-graduation-cap"></i></div>
            <h2 class="fw-800">RAJ HUB</h2>
            <p class="small opacity-75 mb-5">Premium Rajasthan Exam Notes</p>
            <button class="btn-google mx-auto" onclick="login()">
                <img src="https://upload.wikimedia.org/wikipedia/commons/c/c1/Google_Reference_Icon.svg" width="22">
                Sign in with Google
            </button>
            <p class="mt-4 x-small opacity-40" style="font-size: 0.65rem;">Mnoj Nehra Official • Secured by Firebase</p>
        </div>
    </div>

    <!-- 2. MAIN APP -->
    <div id="main-app">
        <header class="container pt-4 d-flex justify-content-between align-items-center">
            <h3 class="fw-bold mb-0">RAJ<span class="text-primary">HUB</span></h3>
            <select class="form-select w-auto bg-dark text-white border-secondary btn-sm rounded-pill" id="langSelect" onchange="switchLang()">
                <option value="hi">हिन्दी</option>
                <option value="en">English</option>
            </select>
        </header>

        <div class="container mt-2">
            
            <!-- HOME PAGE -->
            <div id="homePage" class="page active">
                <div class="py-4">
                    <h2 class="fw-800" id="welcome-txt">नमस्ते, स्टूडेंट</h2>
                    <p class="text-info small">अपनी परीक्षा के अनुसार नोट्स चुनें</p>
                </div>
                
                <div class="cat-scroll">
                    <div class="cat-pill active" onclick="filterCat('All', this)">सभी (All)</div>
                    <div class="cat-pill" onclick="filterCat('Police', this)">Raj Police</div>
                    <div class="cat-pill" onclick="filterCat('Patwari', this)">Patwari</div>
                    <div class="cat-pill" onclick="filterCat('LDC', this)">LDC / Clerk</div>
                    <div class="cat-pill" onclick="filterCat('RAS', this)">RAS / PCS</div>
                </div>

                <div id="notesGrid"></div>

                <div class="text-center mt-5 mb-3 opacity-25 small">
                    <span onclick="showPage('legalPage')">Terms & Policies</span> | 
                    <span onclick="showPage('legalPage')">Privacy</span>
                </div>
            </div>

            <!-- LIBRARY PAGE -->
            <div id="purchasePage" class="page">
                <div class="py-4 text-center"><h2>मेरी लाइब्रेरी</h2><p class="text-success small">Unlocked Notes</p></div>
                <div id="myNotesGrid"></div>
            </div>

            <!-- PROFILE PAGE -->
            <div id="profilePage" class="page">
                <div class="glass-card text-center mt-4">
                    <img id="u-img" src="" class="rounded-circle mb-3 shadow" style="width: 80px; border: 3px solid var(--primary);">
                    <h4 id="u-name" class="mb-1">User Name</h4>
                    <p id="u-email" class="text-info small mb-4">email@example.com</p>
                    
                    <div class="text-start bg-dark bg-opacity-50 p-3 rounded-4 mb-4">
                        <p class="small mb-2"><strong>Support:</strong> +91 8769089527</p>
                        <p class="small mb-0"><strong>Verified Status:</strong> Premium Student</p>
                    </div>

                    <div class="d-grid gap-2">
                        <button class="btn btn-outline-light btn-sm rounded-pill" onclick="showPage('legalPage')">Legal Policies</button>
                        <button class="btn btn-danger btn-sm rounded-pill mt-2" onclick="logout()">Logout</button>
                    </div>
                </div>
            </div>

            <!-- LEGAL & POLICIES (1200+ WORDS CONTENT) -->
            <div id="legalPage" class="page">
                <div class="policy-content">
                    <h3 class="text-primary fw-bold">Legal Policies & Agreements</h3>
                    
                    <h4>1. Contact Us (संपर्क विवरण)</h4>
                    <p>Mnoj Nehra Notes Hub (Raj Exam Hub) ek authorized educational platform hai. Hamara uddeshya Rajasthan ke vidyarthiyo ko behtar pathya samagri pradan karna hai. Kisi bhi bhugtan ya takniki samasya ke liye humse sampark karein:</p>
                    <ul>
                        <li><strong>Proprietor:</strong> Manoj Nehra</li>
                        <li><strong>Contact Number:</strong> +91 8769089527</li>
                        <li><strong>Email:</strong> support@mnojnehra.com</li>
                        <li><strong>Address:</strong> Ward No. 12, Rajasthan, India</li>
                    </ul>

                    <h4>2. Terms and Conditions (नियम एवं शर्तें)</h4>
                    <p>Hamari website ka upyog karne ke liye aapko niche diye gaye niyamo ka palan karna hoga. Yeh niyam aap aur Mnoj Nehra Notes Hub ke beech ek kanooni samjhauta hain:</p>
                    <ul>
                        <li><strong>License:</strong> Kharide gaye notes sirf aapke vyaktigat upyog ke liye hain. Ise kisi group mein share karna ya bechna kanoonan apradh hai.</li>
                        <li><strong>Account Security:</strong> Ek Google account se sirf ek hi vyakti notes padh sakta hai. Multiple devices par suspicious activity paye jane par account block kar diya jayega.</li>
                        <li><strong>Validity:</strong> Sabhi notes 365 din (1 year) tak valid rahenge.</li>
                    </ul>

                    <h4>3. Privacy Policy (गोपनीयता नीति)</h4>
                    <p>Hum aapki privacy ka poora samman karte hain. Hum Google Login ke madhyam se sirf aapka naam, email aur profile photo lete hain taaki aapko secure access de sakein. Hum aapka data kabhi bhi kisi third party marketing agency ko nahi bechte hain. Payment poori tarah Razorpay ke encrypted server par hoti hai.</p>

                    <h4>4. Refund & Cancellation Policy</h4>
                    <p>Hamare notes digital format mein hain. Ek baar payment hone ke baad notes turant unlock ho jate hain, isliye hum <strong>Strict No-Refund Policy</strong> ka palan karte hain. Agar ek hi note ke liye do baar paise kat jate hain, toh transaction ID bhej kar aap 7 din mein refund le sakte hain.</p>

                    <h4>5. Shipping & Delivery Policy</h4>
                    <p>Kyunki hum digital products (PDF) pradan karte hain, isliye koi physical shipping nahi hoti. Payment hote hi notes "Library" section mein instant unlock ho jate hain. Koi extra shipping charge nahi hai.</p>
                </div>
                <button class="btn btn-primary w-100 rounded-pill mt-4" onclick="showPage('homePage')">I Accept, Back to Home</button>
            </div>
        </div>

        <!-- Navigation Dock -->
        <div class="nav-dock">
            <div class="nav-link-3d active" onclick="showPage('homePage', this)"><i class="fas fa-home"></i><span>Home</span></div>
            <div class="nav-link-3d" onclick="showPage('purchasePage', this)"><i class="fas fa-book-open"></i><span>Library</span></div>
            <div class="nav-link-3d" onclick="showPage('profilePage', this)"><i class="fas fa-user-circle"></i><span>Profile</span></div>
            <div class="nav-link-3d" onclick="showPage('legalPage', this)"><i class="fas fa-shield-alt"></i><span>Legal</span></div>
        </div>
    </div>

    <!-- Reader -->
    <div id="reader-overlay">
        <div class="p-3 bg-dark d-flex justify-content-between align-items-center">
            <span class="fw-bold text-primary small"><i class="fas fa-lock me-2"></i>SECURE READER</span>
            <button class="btn btn-danger btn-sm rounded-pill px-4" onclick="closeReader()">CLOSE X</button>
        </div>
        <iframe id="pdfViewer"></iframe>
    </div>

    <!-- Scripts -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAhg7hKJ123JRAfio7fymK543XpuNonMHo",
            authDomain: "showpdf-ffa34.firebaseapp.com",
            projectId: "showpdf-ffa34",
            storageBucket: "showpdf-ffa34.firebasestorage.app",
            messagingSenderId: "943291456891",
            appId: "1:943291456891:web:b96e20acd76bd3463b71de"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        window.login = () => { signInWithPopup(auth, provider).catch(e => alert(e.message)); };
        window.logout = () => { signOut(auth); };

        onAuthStateChanged(auth, (user) => {
            if (user) {
                document.getElementById('auth-screen').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                document.getElementById('welcome-txt').innerText = "नमस्ते, " + user.displayName.split(' ')[0];
                document.getElementById('u-name').innerText = user.displayName;
                document.getElementById('u-email').innerText = user.email;
                document.getElementById('u-img').src = user.photoURL;
                renderNotes('All');
            } else {
                document.getElementById('auth-screen').style.display = 'flex';
                document.getElementById('main-app').style.display = 'none';
            }
        });
    </script>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
        const notesData = [
            { id: 1, hi: "राजस्थान पुलिस - लक्ष्य नोट्स", en: "Raj Police Master Notes", cat: "Police", price: 99, file: "raj. police.pdf" },
            { id: 2, hi: "कोटा सिटी गाइड (Premium PDF)", en: "Kota City Master Guide", cat: "All", price: 49, file: "kota city.pdf" },
            { id: 3, hi: "पटवारी मुख्य परीक्षा नोट्स", en: "Patwari Exam Special", cat: "Patwari", price: 149, file: "patwari.pdf" },
            { id: 4, hi: "LDC / Clerk Grade-II Notes", en: "LDC Clerk Notes", cat: "LDC", price: 120, file: "ldc.pdf" },
            { id: 5, hi: "RAS राजस्थान कला एवं संस्कृति", en: "RAS Art & Culture", cat: "RAS", price: 299, file: "ras_culture.pdf" }
        ];

        function renderNotes(cat) {
            let grid = document.getElementById('notesGrid'); grid.innerHTML = '';
            notesData.filter(n => cat === 'All' || n.cat === cat).forEach(n => {
                let paid = localStorage.getItem(n.file);
                grid.innerHTML += `
                    <div class="glass-card note-card d-flex align-items-center justify-content-between mt-3">
                        <div class="d-flex align-items-center">
                            <div style="font-size:1.5rem; color:var(--primary); margin-right:15px;"><i class="fas fa-file-pdf"></i></div>
                            <div><h6 class="mb-0 fw-bold">${n.hi}</h6><small class="text-info">${n.cat}</small></div>
                        </div>
                        <div class="d-flex align-items-center">
                            ${!paid ? `<div class="fw-bold text-success me-2">₹${n.price}</div>` : ''}
                            <button class="btn-3d" onclick="${paid?`openReader('${n.file}')`:`payNow(${n.price},'${n.file}')`}">${paid?'पढ़ें':'खरीदें'}</button>
                        </div>
                    </div>`;
            });
        }

        function renderMyPurchases() {
            let grid = document.getElementById('myNotesGrid'); grid.innerHTML = '';
            let count = 0;
            notesData.forEach(n => {
                if(localStorage.getItem(n.file)) {
                    count++;
                    grid.innerHTML += `<div class="glass-card note-card mt-3">
                        <h6 class="mb-0 fw-bold">${n.hi}</h6>
                        <button class="btn-3d" onclick="openReader('${n.file}')">पढ़ें</button>
                    </div>`;
                }
            });
            if(count === 0) grid.innerHTML = '<div class="text-center mt-5 opacity-40">No notes unlocked yet.</div>';
        }

        function showPage(pId, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(pId).classList.add('active');
            if(el) { document.querySelectorAll('.nav-link-3d').forEach(i => i.classList.remove('active')); el.classList.add('active'); }
            if(pId === 'purchasePage') renderMyPurchases();
        }

        function filterCat(cat, el) {
            document.querySelectorAll('.cat-pill').forEach(p => p.classList.remove('active'));
            el.classList.add('active'); renderNotes(cat);
        }

        function payNow(amt, file) {
            var options = {
                "key": "rzp_test_RwizK12wU5cyN6", 
                "amount": amt * 100, "currency": "INR", "name": "Raj Exam Hub",
                "handler": function (response) { localStorage.setItem(file, "paid"); location.reload(); }
            };
            new Razorpay(options).open();
        }

        function openReader(file) {
            document.getElementById('reader-overlay').style.display = 'block';
            let pdfUrl = window.location.href.split('index.html')[0] + encodeURIComponent(file);
            document.getElementById('pdfViewer').src = "https://docs.google.com/viewer?url=" + encodeURIComponent(pdfUrl) + "&embedded=true";
        }

        function closeReader() { document.getElementById('reader-overlay').style.display = 'none'; document.getElementById('pdfViewer').src = ""; }
    </script>
</body>
</html>
