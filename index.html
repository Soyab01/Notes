<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Manoj Nehra | Premium Notes Hub</title>
    
    <!-- Fonts & UI Assets -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;800&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root { --primary: #6366f1; --secondary: #a855f7; --glass: rgba(255, 255, 255, 0.08); --dark-bg: #030712; }
        body { background: radial-gradient(circle at top right, #1e1b4b, #030712); color: #f8fafc; font-family: 'Poppins', sans-serif; min-height: 100vh; overflow-x: hidden; padding-bottom: 120px; user-select: none; }
        
        /* 3D Glass UI */
        .glass-card { background: var(--glass); backdrop-filter: blur(25px); border: 1px solid rgba(255,255,255,0.1); border-radius: 25px; padding: 22px; margin-bottom: 20px; box-shadow: 0 15px 35px rgba(0,0,0,0.4); transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .note-card:hover { transform: translateY(-8px) scale(1.01); border-color: var(--primary); }

        /* Auth Screen */
        #auth-screen { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: var(--dark-bg); z-index: 9000; display: flex; align-items: center; justify-content: center; flex-direction: column; overflow-y: auto; padding: 20px; }
        .brand-logo { width: 100px; height: 100px; border-radius: 50%; border: 3px solid var(--primary); object-fit: cover; box-shadow: 0 0 25px var(--primary); margin-bottom: 15px; }
        .btn-google { background: white; color: #333; border: none; padding: 12px 25px; border-radius: 50px; font-weight: 700; display: flex; align-items: center; justify-content: center; gap: 12px; width: 100%; max-width: 300px; transition: 0.3s; box-shadow: 0 10px 20px rgba(0,0,0,0.3); }
        .btn-google img { width: 20px; }

        /* Navigation Dock */
        .nav-dock { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); width: 95%; max-width: 500px; background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(25px); border-radius: 35px; display: flex; justify-content: space-around; padding: 12px 0; z-index: 5000; box-shadow: 0 20px 60px rgba(0,0,0,0.7); }
        .nav-link-3d { color: rgba(255,255,255,0.4); text-decoration: none; text-align: center; flex: 1; cursor: pointer; transition: 0.4s; }
        .nav-link-3d.active { color: var(--primary); transform: translateY(-8px); text-shadow: 0 0 10px var(--primary); }
        .nav-link-3d i { font-size: 1.3rem; display: block; margin-bottom: 2px; }
        .nav-link-3d span { font-size: 0.6rem; font-weight: 700; text-transform: uppercase; }

        /* Long Form Policy Content */
        .policy-container { background: rgba(0,0,0,0.3); border-radius: 30px; padding: 30px; border: 1px solid rgba(255,255,255,0.05); line-height: 1.9; color: #cbd5e1; display: none; }
        .policy-container.active { display: block; animation: fadeInUp 0.4s ease-out; }
        .policy-container h2 { color: var(--primary); font-weight: 800; border-bottom: 2px solid var(--glass); padding-bottom: 10px; margin-bottom: 25px; }
        .policy-container h4 { color: white; margin-top: 35px; border-left: 5px solid var(--primary); padding-left: 15px; background: rgba(255,255,255,0.03); padding: 10px; border-radius: 0 10px 10px 0; }
        .policy-container p, .policy-container li { font-size: 0.85rem; margin-bottom: 15px; text-align: justify; }

        /* Page Layouts */
        #main-app { display: none; }
        .page { display: none; }
        .page.active { display: block; animation: fadeInUp 0.4s ease-out; }
        @keyframes fadeInUp { from {opacity: 0; transform: translateY(20px);} to {opacity: 1; transform: translateY(0);} }

        .btn-buy { background: linear-gradient(135deg, var(--primary), var(--secondary)); border: none; color: white; padding: 8px 18px; border-radius: 12px; font-weight: 700; box-shadow: 0 4px 0 #312e81; white-space: nowrap; }
        #reader-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 9999; }
        iframe { width: 100%; height: 92vh; border: none; }
        .reviewer-box input { background: rgba(255,255,255,0.05); border: 1px solid #444; color: white; border-radius: 10px; padding: 10px; width: 100%; margin-bottom: 8px; font-size: 0.8rem; outline: none; }
    </style>
</head>
<body oncontextmenu="return false;">

    <!-- 1. LOGIN SCREEN -->
    <div id="auth-screen">
        <div class="glass-card text-center" style="max-width: 400px; width: 95%;">
            <img src="./manoj.jpg.jpg" class="brand-logo" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3135/3135715.png'">
            <h2 class="fw-800">MANOJ NEHRA</h2>
            <p class="small opacity-75 mb-4">Premium Rajasthan Exams Study Hub</p>
            
            <button class="btn-google mx-auto mb-4" onclick="login()">
                <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg">
                Sign in with Google
            </button>

            <div class="reviewer-box mt-3" style="border-top: 1px solid rgba(255,255,255,0.1); padding-top: 15px;">
                <p class="x-small opacity-50 mb-2">Reviewer Login (Demo Access)</p>
                <input type="text" id="demo-user" placeholder="test@mnojnehra.com">
                <input type="password" id="demo-pass" placeholder="Password">
                <button class="btn btn-sm btn-outline-primary w-100 rounded-pill" onclick="reviewerLogin()">Bypass Auth</button>
            </div>
            
            <div class="mt-4 opacity-50 x-small">
                <a onclick="showPolicy('privacyPage')" class="text-white mx-2">Privacy</a> | 
                <a onclick="showPolicy('termsPage')" class="text-white mx-2">Terms</a> | 
                <a onclick="showPolicy('refundPage')" class="text-white mx-2">Refunds</a>
            </div>
        </div>
    </div>

    <!-- 2. MAIN APP -->
    <div id="main-app">
        <header class="container pt-4 d-flex justify-content-between align-items-center">
            <div class="d-flex align-items-center gap-2">
                <img src="./manoj.jpg.jpg" class="brand-logo" style="width:40px; height:40px; border-width:2px;" onerror="this.src='https://cdn-icons-png.flaticon.com/512/3135/3135715.png'">
                <h5 class="fw-bold mb-0">MANOJ NEHRA</h5>
            </div>
        </header>

        <div class="container mt-2">
            <!-- Home -->
            <div id="homePage" class="page active">
                <div class="py-4"><h2 class="fw-800" id="welcome-name">नमस्ते, स्टूडेंट</h2><p class="text-info small">राजस्थान प्रतियोगी परीक्षा प्रीमियम नोट्स</p></div>
                <div id="notesGrid"></div>
                <div class="text-center mt-5 mb-4 opacity-30 x-small">
                    <a onclick="showPolicy('privacyPage')" class="text-white mx-1">Privacy Policy</a> | 
                    <a onclick="showPolicy('termsPage')" class="text-white mx-1">Terms</a> | 
                    <a onclick="showPolicy('refundPage')" class="text-white mx-1">Refund Policy</a> | 
                    <a onclick="showPolicy('shippingPage')" class="text-white mx-1">Shipping</a> | 
                    <a onclick="showPolicy('contactPage')" class="text-white mx-1">Contact Us</a>
                </div>
            </div>

            <!-- Library -->
            <div id="purchasePage" class="page">
                <div class="py-4 text-center"><h2>मेरी लाइब्रेरी</h2><p class="text-success small">आपके द्वारा खरीदे गए नोट्स</p></div>
                <div id="myNotesGrid"></div>
            </div>

            <!-- Profile -->
            <div id="profilePage" class="page">
                <div class="glass-card text-center mt-4">
                    <img id="u-img" src="" class="rounded-circle mb-3 shadow" style="width: 80px; border: 3px solid var(--primary);">
                    <h4 id="u-name">Student Name</h4>
                    <div class="text-start mt-4 mb-4">
                        <p class="small border-bottom border-secondary pb-2" onclick="showPolicy('contactPage')"><i class="fas fa-headset me-2 text-primary"></i> Contact Support</p>
                        <p class="small border-bottom border-secondary pb-2" onclick="showPolicy('privacyPage')"><i class="fas fa-user-shield me-2 text-primary"></i> Privacy Policy</p>
                        <p class="small border-bottom border-secondary pb-2" onclick="showPolicy('termsPage')"><i class="fas fa-file-contract me-2 text-primary"></i> Terms & Conditions</p>
                        <p class="small border-bottom border-secondary pb-2" onclick="showPolicy('refundPage')"><i class="fas fa-undo me-2 text-primary"></i> Refund & Cancellation</p>
                        <p class="small" onclick="showPolicy('shippingPage')"><i class="fas fa-truck me-2 text-primary"></i> Shipping Policy</p>
                    </div>
                    <button class="btn btn-danger btn-sm rounded-pill w-100" onclick="logout()">Logout Account</button>
                </div>
            </div>

            <!-- LEGAL PAGES (LONG CONTENT) -->
            <div id="legalArea">
                <div id="privacyPage" class="policy-container">
                    <h2>Privacy Policy</h2>
                    <p>Mnoj Nehra Notes Hub operates this website to provide high-quality educational resources. We respect your privacy. (विस्तृत 1200 शब्दों की गोपनीयता नीति यहाँ शुरू होती है...) 1. **Data Collection**: We collect your name and email through Google Auth. This is used solely to manage your library. 2. **Financial Data**: Payments are managed by Razorpay. We do not store your UPI or Card details. 3. **Usage**: Your data is stored securely on Firebase and is never sold to 3rd party marketing firms. 4. **Duration**: We keep your data as long as your 1-year subscription is active. For any concerns, contact +91 8769089527.</p>
                    <button class="btn btn-primary w-100 rounded-pill mt-4" onclick="closePolicy()">Back to App</button>
                </div>

                <div id="termsPage" class="policy-container">
                    <h2>Terms & Conditions</h2>
                    <p>Welcome to Manoj Nehra Notes Hub. (नियम और शर्तों का विस्तृत विवरण...) 1. **License**: You are granted a personal license to read our notes. 2. **Prohibitions**: Reselling, sharing, or recording PDF content is strictly prohibited. 3. **Termination**: Any violation will result in immediate ban without refund. 4. **Content**: All notes are intellectual property of Manoj Nehra. By using this site, you agree to follow all local Rajasthan and Indian laws regarding digital piracy.</p>
                    <button class="btn btn-primary w-100 rounded-pill mt-4" onclick="closePolicy()">Back to App</button>
                </div>

                <div id="refundPage" class="policy-container">
                    <h2>Refund & Cancellation</h2>
                    <p>Our refund policy for digital notes. (रिफंड और रद्दीकरण की विस्तृत नीति...) 1. **No Refund**: Once the digital content is accessed, no refund will be issued. 2. **Duplicate Payment**: If charged twice for same note, contact support within 24 hours for a refund in 7 days. 3. **Cancellation**: Digital orders cannot be cancelled after fulfillment. Please read titles carefully before clicking Buy.</p>
                    <button class="btn btn-primary w-100 rounded-pill mt-4" onclick="closePolicy()">Back to App</button>
                </div>

                <div id="shippingPage" class="policy-container">
                    <h2>Shipping Policy</h2>
                    <p>Digital delivery information. (शिपिंग नीति विवरण...) 1. **Instant Access**: Notes are unlocked instantly in your 'Library' section upon payment success. 2. **No Physical Shipping**: We do not deliver hard copies or books. 3. **Zero Fees**: Since delivery is electronic, no shipping fees apply. Any access delay should be reported to support@mnojnehra.com.</p>
                    <button class="btn btn-primary w-100 rounded-pill mt-4" onclick="closePolicy()">Back to App</button>
                </div>

                <div id="contactPage" class="policy-container">
                    <h2>Contact Us</h2>
                    <p>Reach us for any assistance:</p>
                    <ul>
                        <li><strong>Proprietor:</strong> Manoj Nehra</li>
                        <li><strong>Phone/WhatsApp:</strong> +91 8769089527</li>
                        <li><strong>Email:</strong> support@mnojnehra.com</li>
                        <li><strong>Address:</strong> Ward No. 12, Tehsil - Rajasthan, India</li>
                        <li><strong>Support Hours:</strong> 10:00 AM - 6:00 PM (Mon-Sat)</li>
                    </ul>
                    <button class="btn btn-primary w-100 rounded-pill mt-4" onclick="closePolicy()">Back to App</button>
                </div>
            </div>
        </div>

        <div class="nav-dock">
            <div class="nav-link-3d active" onclick="showPage('homePage', this)"><i class="fas fa-home"></i><span>Home</span></div>
            <div class="nav-link-3d" onclick="showPage('purchasePage', this)"><i class="fas fa-book-open"></i><span>Library</span></div>
            <div class="nav-link-3d" onclick="showPage('profilePage', this)"><i class="fas fa-user-circle"></i><span>Profile</span></div>
        </div>
    </div>

    <!-- Reader -->
    <div id="reader-overlay">
        <div class="p-3 bg-dark d-flex justify-content-between align-items-center">
            <span class="text-primary small fw-bold">SECURE VIEW</span>
            <div class="d-flex gap-2">
                <button class="btn btn-success btn-sm rounded-pill" id="down-btn"><i class="fas fa-download"></i></button>
                <button class="btn btn-danger btn-sm rounded-pill px-4" onclick="closeReader()">Close X</button>
            </div>
        </div>
        <iframe id="pdfViewer"></iframe>
    </div>

    <!-- Firebase & Logic -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, GoogleAuthProvider, signInWithPopup, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyAhg7hKJ123JRAfio7fymK543XpuNonMHo",
            authDomain: "showpdf-ffa34.firebaseapp.com",
            projectId: "showpdf-ffa34",
            storageBucket: "showpdf-ffa34.firebasestorage.app",
            messagingSenderId: "943291456891",
            appId: "1:943291456891:web:b96e20acd76bd3463b71de"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const provider = new GoogleAuthProvider();

        window.login = () => signInWithPopup(auth, provider);
        window.logout = () => signOut(auth).then(() => location.reload());

        onAuthStateChanged(auth, (user) => {
            window.isUserLoggedIn = !!user;
            if (user) {
                window.currentUser = user.email;
                document.getElementById('auth-screen').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                document.getElementById('welcome-name').innerText = "नमस्ते, " + user.displayName;
                document.getElementById('u-name').innerText = user.displayName;
                document.getElementById('u-img').src = user.photoURL;
                renderNotes();
            } else {
                document.getElementById('auth-screen').style.display = 'flex';
                document.getElementById('main-app').style.display = 'none';
            }
        });

        window.reviewerLogin = () => {
            if(document.getElementById('demo-user').value === "test@mnojnehra.com" && document.getElementById('demo-pass').value === "razorpay_test_2025") {
                window.isUserLoggedIn = true; window.currentUser = "test@reviewer.com";
                document.getElementById('auth-screen').style.display = 'none';
                document.getElementById('main-app').style.display = 'block';
                renderNotes();
            } else { alert("Invalid Credentials"); }
        }
    </script>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>
        const notesData = [
            { id: 1, hi: "राजस्थान पुलिस - लक्ष्य नोट्स", cat: "Police", price: 99, file: "raj. police.pdf" },
            { id: 2, hi: "पटवारी मुख्य परीक्षा नोट्स", cat: "Patwari", price: 149, file: "patwari.pdf" }
        ];

        function getPaidKey(f) { return (window.currentUser || "anonymous") + "_" + f; }

        function renderNotes() {
            let grid = document.getElementById('notesGrid'); grid.innerHTML = '';
            notesData.forEach(n => {
                let paid = localStorage.getItem(getPaidKey(n.file));
                grid.innerHTML += `<div class="glass-card d-flex align-items-center justify-content-between mt-2">
                    <div class="text-start">
                        <h6 class="mb-0 fw-bold">${n.hi}</h6>
                        <small class="text-info">${n.cat} • 1 Year Access</small>
                    </div>
                    <div class="d-flex align-items-center">
                        ${!paid ? `<span class="fw-bold text-success me-3">₹${n.price}</span>` : ''}
                        <button class="btn-buy btn-sm" onclick="${paid?`openReader('${n.file}')`:`payNow(${n.price},'${n.file}')`}">${paid?'पढ़ें':'खरीदें'}</button>
                    </div>
                </div>`;
            });
        }

        function renderMyPurchases() {
            let grid = document.getElementById('myNotesGrid'); grid.innerHTML = '';
            let count = 0;
            notesData.forEach(n => {
                if(localStorage.getItem(getPaidKey(n.file))) {
                    count++;
                    grid.innerHTML += `<div class="glass-card d-flex align-items-center justify-content-between mt-2">
                        <h6 class="mb-0 fw-bold">${n.hi}</h6>
                        <button class="btn-buy btn-sm" onclick="openReader('${n.file}')">पढ़ें</button>
                    </div>`;
                }
            });
            if(count === 0) grid.innerHTML = '<p class="text-center mt-5 opacity-40">कोई नोट्स नहीं मिले।</p>';
        }

        function showPage(pId, el) {
            document.querySelectorAll('.page, .policy-container').forEach(p => p.classList.remove('active'));
            document.getElementById(pId).classList.add('active');
            if(el) { document.querySelectorAll('.nav-link-3d').forEach(i => i.classList.remove('active')); el.classList.add('active'); }
            if(pId === 'purchasePage') renderMyPurchases();
            window.scrollTo(0,0);
        }

        function showPolicy(pId) {
            document.querySelectorAll('.page, .policy-container').forEach(p => p.classList.remove('active'));
            document.getElementById(pId).classList.add('active');
            window.scrollTo(0,0);
        }

        function closePolicy() {
            if(!window.isUserLoggedIn) { document.getElementById('auth-screen').style.display = 'flex'; document.getElementById('main-app').style.display = 'none'; }
            else { showPage('homePage', document.querySelectorAll('.nav-link-3d')[0]); }
        }

        function payNow(amt, file) {
            var options = { "key": "rzp_test_RwizK12wU5cyN6", "amount": amt * 100, "name": "Manoj Nehra Hub",
                "handler": function (res) { localStorage.setItem(getPaidKey(file), "paid"); location.reload(); }
            };
            new Razorpay(options).open();
        }

        function openReader(file) {
            let pdfUrl = window.location.href.split('index.html')[0] + encodeURIComponent(file);
            document.getElementById('reader-overlay').style.display = 'block';
            document.getElementById('pdfViewer').src = "https://docs.google.com/viewer?url=" + encodeURIComponent(pdfUrl) + "&embedded=true";
            document.getElementById('down-btn').onclick = () => { window.open(pdfUrl, '_blank'); };
        }
        function closeReader() { document.getElementById('reader-overlay').style.display = 'none'; }
    </script>
</body>
</html>
